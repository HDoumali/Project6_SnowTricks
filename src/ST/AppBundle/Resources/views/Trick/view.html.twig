{% extends "STAppBundle::layout.html.twig" %}

{% block title %}
	Figure - {{ trick.name }} - {{ parent() }}
{% endblock %}

{% block body %}


<a href="{{ path('st_app_edit', {'id': trick.id}) }}"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></a>
<a href="{{ path('st_app_delete', {'id': trick.id}) }}"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span></a>

<h1>{{ trick.name }}</h1>

<p>{{ trick.description }}</p>

{% if trick.category is not null %}
	<p>{{ trick.category.name }}</p>
{% else %}
	<p>Pas de catégorie</p>
{% endif %}

{% if trick.pictures is not empty %}
	{% for picture in trick.pictures %}
		<img src="{{ asset(picture.webPath) }}" alt="{{ picture.alt }}">
	{% endfor %}
{% else %}
	<p>Pas d'image</p>
{% endif %}

{% if trick.videos is not empty %}
	{% for video in trick.videos %}
            <iframe width="280" height="160" src="{{ video.link }}" frameborder="0" allowfullscreen></iframe>
	{% endfor %}
{% else %}
	<p>Pas de video</p>
{% endif %}

<h3>Ajouter un commentaire</h3>

 <div class="well">
  {{ form_start(form, {'attr': {'class': 'form-horizontal'}}) }}
  {{ form_errors(form) }}

  <div class="form-group">
	    {{ form_label(form.content, "Message", {'label_attr': {'class': 'col-sm-2 control-label'}}) }}
	    {{ form_errors(form.content) }}
	    <div class="col-sm-10">
	      {{ form_widget(form.content, {'attr': {'class': 'form-control'}}) }}
	    </div>
  </div>

  {{ form_rest(form) }}
  {{ form_widget(form.Ajouter, {'attr': {'class': 'btn btn-primary'}}) }}
  {{ form_end(form) }}
</div>

<p>Ce commentaire sera ajoutée directement à l'espace de discussion</p>

<div>
    {% for message in app.session.flashbag.get('message') %}
		<p>Message flash : {{ message }}</p>
    {% endfor %}
</div>

<h3>Espace de discussion </h3>

{% for comment in listComments %}
		<p>le {{ comment.date|date('d/m/Y') }}</p>
		<p>{{ comment.content }} </p>
{% else %}
	<p>Pas de commentaire.</p>
{% endfor %}

{% endblock %}

